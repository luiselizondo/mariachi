extends layout

block content
	script(type="text/template", class="addRecepie")
		div.row
			div(class="col-lg-12 col-md-12 col-sm-12 col-xs-12")
				h3 Add recepie
				form(role="form").well
					div.form-group
						label Name
						input(type="text", name="name", class="form-control", id="name")
						span.help-block Name of the recepie
					div.form-group
						label Description
						textarea(name="description", class="form-control", id="description", rows="3")
						span.help-block Enter a brief description of the recepie
					div.form-group
						label Recepie
						textarea(name="recepie", class="form-control", id="recepie", rows="15")
						span.help-block Enter a bash script recepie
					button(type="submit", class="btn btn-primary", id="submit") Save
	script(type="text/template", class="editRecepie")
		div.row
			div(class="col-lg-12 col-md-12 col-sm-12 col-xs-12")
				h3 Add server
				form(role="form").well
					div.form-group
						label Name
						<input type="text" name="name" class="form-control" id="name" value="<%= name %>" />
						span.help-block Name of the recepie
					div.form-group
						label Description
						textarea(name="description", class="form-control", id="description", rows="3") <%= description %>
						span.help-block Enter a brief description of the recepie
					div.form-group
						label Recepie
						textarea(name="recepie", class="form-control", id="recepie", rows="15") <%= recepie %>
						span.help-block Enter a bash script recepie
					button(type="submit", class="btn btn-primary", id="submit") Update
	script(type="text/template", class="viewRecepie")
		div(class="col-lg-12 col-md-12 col-sm-12 col-xs-12")
			h3 <%= name %>
				div.btn-group.pull-right
					a(href="#", class="btn btn-success dropdown-toggle", data-toggle="dropdown") Actions
						span.caret
					ul(role="menu").dropdown-menu
						li
							<a href="#recepies/deploy/<%= id %>">Deploy</a>
						li
							<a href="#recepies/history/<%= id %>">Deploy history</a>
						li
							<a href="#recepies/edit/<%= id %>">Edit</a>
						li
							<a href="#recepies/delete/<%= id %>">Delete</a>
			hr
			div(class="col-lg-9 col-md-9 col-sm-9 col-xs-12")
				div.row
					p <%= description %>
					br
					h4 Recepie
					div.well.code <%= recepie.replace(new RegExp('\r?\n', 'g'), '<br />') %>

	script(type="text/template", class="deployRecepie")
		div(class="col-lg-12 col-md-12 col-sm-12 col-xs-12")
			h3 Deploy: <%= name %>
				div.btn-group.pull-right
					a(href="#", class="btn btn-success dropdown-toggle", data-toggle="dropdown") Actions
						span.caret
					ul(role="menu").dropdown-menu
						li
							<a href="#recepies/<%= id %>">View</a>
						li
							<a href="#recepies/history/<%= id %>">Deploy history</a>
						li
							<a href="#recepies/edit/<%= id %>">Edit</a>
						li
							<a href="#recepies/delete/<%= id %>">Delete</a>
			hr
			div(class="col-lg-9 col-md-9 col-sm-9 col-xs-12")
				div.row
					p <%= description %>
					br
					


	script(type="text/template", class="deleteRecepie")
		div 
			p 
				strong Are you sure you want to delete the recepie <%= name %>?
		button(type="submit", id="submit").btn.btn-danger Confirm delete
		a(href="/recepies").btn.btn-primary Cancel
	script(type="text/template", class="listRecepies")
		div(class="col-lg-9 col-md-9 col-sm-12 col-xs-12")
			table.table.table-hover.table-striped
				thead
					th.col-lg-11.col-sm-11.col-md-11.col-xs-11 Name
					th 
				tbody
					<% _.each(items, function(item) { %>
					tr.item
						td 
							<a href="#recepies/<%= item.id %>"><%= item.name %></a>
							div
								small <%= item.description %>
						td 
							<a href="#recepies/<%= item.id %>" class="btn btn-default">View</a>
					<% }) %>
	div#page
		div#header
			div.container
				div.col-lg-12.col-md-12.col-sm-12.col-xs-12
					h1= title
						div.pull-right
							a(href="#recepies/add").btn.btn-primary Add recepie
					br
				div(class="col-lg-12 col-md-12 col-sm-12 col-xs-12")
					div.row
						div#messages
						div#content


block scripts
	script(type="text/javascript", src="javascripts/app/models/Models.js");
	script(type="text/javascript", src="javascripts/app/collections/Collections.js");
	script(type="text/javascript", src="javascripts/app/views/RecepiesView.js");
	script(type="text/javascript", src="javascripts/app/routers/RecepiesRouter.js")
	script(type="text/javascript")
		function main() {
			new Mariachi.Routers.RecepiesRouter();
			Backbone.history.start();	
		}

		// Initialize main
		$(function(){
			main();
		});